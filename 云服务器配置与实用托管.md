# 云服务器配置与实用托管

## Gitea代码托管



## SSH端口转发（LLM回答，未测试）

1. 在云服务器上运行SSH服务。

   ```shell
   sudo service ssh status #检查状态
   ```

   修改云服务的SSH配置文件（`/etc/ssh/sshd_config`）

   ```text
   GatewayPorts yes #修改或添加改行
   ```

   ```shell
   sudo service ssh restart #重新启动
   ```

   - （可选）使用`autossh`自动启动和维护SSH会话

     ```shell
     sudo apt install autossh
     ```

     

2. 在远程主机上创建一个到云服务器的SSH隧道。

   ```shell
   ssh -f -N -T -R 22222:localhost:22 your_username@your_cloud_server
   ```

   `-R 22222:localhost:22`表示在云服务器上创建一个监听22222端口的隧道，所有到这个端口的连接都会被转发到远程服务器的22端口。

   对于多台远程主机，只要端口即可。

   - （可选）带有autoss配置的SSH隧道

     ```shell
     autossh -M 0 -f -N -T -o "ServerAliveInterval 30" -o "ServerAliveCountMax 3" -R 22222:localhost:22 your_username@your_cloud_server
     ```

     `-M 0`表示禁用`autossh`的监控功能，`-o "ServerAliveInterval 30"`和`-o "ServerAliveCountMax 3"`是SSH的选项，用于检测SSH会话是否存活。如果30秒内没有收到任何响应，SSH会发送一个信号给服务器。如果连续3次都没有收到响应，SSH会话将被关闭，然后`autossh`会重新启动它。

3. 在本地机器上通过SSH连接到云服务器的22222端口。

   ```shell
   ssh your_username@your_cloud_server -p 22222
   ```

4. 使用VSCode的Remote - SSH扩展连接远程主机

   - 在VSCode中执行`Remote-SSH: 打开 SSH 配置文件`命令，选择一个配置文件

     ```text
     Host remote-server
         HostName your_cloud_server
         User your_username
         Port 22222
     ```

   - 执行`Remote-SSH: 连接到主机`命令，选择主机配置。

## RustDesk Server自托管


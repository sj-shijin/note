## Ubuntu配置

### 软件镜像源

[清华源](https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/)

备份并修改`/etc/apt/sources.list`

```
# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse

deb http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse
# deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse

# 预发布软件源，不建议启用
# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse
# # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse
```

### 终端（fish）

```bash
sudo apt install fish
```

方法一：在`~/.bashrc`中添加（不需要迁移原有的脚本）：

```bash
if [[ $(ps --no-header --pid=$PPID --format=cmd) != "fish" ]]
then
    exec fish
fi
```

方法二：迁移脚本到`/etc/fish/config.fish`（所有用户）或`~/.config/fish/config.fish`（当前用户）

### C/C++

```bash
sudo apt install gcc
sudo apt install g++
sudo apt install gdb
```

### CUDA

[官方安装指南](https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html)

### Python（miniconda）

[清华源](https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/)

下载并安装miniconda后，在`~/.condarc`中修改：

```
channels:
  - defaults
show_channel_urls: true
default_channels:
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2
custom_channels:
  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  pytorch-lts: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  deepmodeling: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/
```

清除索引缓存：

```bash
conda clean -i
```

### Rustup/crates.io

[字节源](https://rsproxy.cn/#getStarted)

1. 设置Rustup镜像，在`~/.bashrc`中添加：

   ```bash
   export RUSTUP_DIST_SERVER="https://rsproxy.cn"
   export RUSTUP_UPDATE_ROOT="https://rsproxy.cn/rustup"
   ```

   并重启终端。

2. 安装Rust

   ```bash
   curl --proto '=https' --tlsv1.2 -sSf https://rsproxy.cn/rustup-init.sh | sh
   ```

3. 设置crates.io镜像， 修改配置文件`~/.cargo/config`

   ```
   [source.crates-io]
   replace-with = 'rsproxy-sparse'
   [source.rsproxy]
   registry = "https://rsproxy.cn/crates.io-index"
   [source.rsproxy-sparse]
   registry = "sparse+https://rsproxy.cn/index/"
   [registries.rsproxy]
   index = "https://rsproxy.cn/crates.io-index"
   [net]
   git-fetch-with-cli = true
   ```

### 实用工具

1. 文本编辑器（gedit，vim）

2. 文件管理器（nautilus）

3. **非常好用**：命令速查Too Long Didn't Read（tldr）

   第一次运行时更新数据库（需要连接到github）

   ```bash
   tldr --update
   ```

4. 系统监控（htop，btop）

5. 视频音频转换（ffmpeg）

6. 图像转换（imagemagick）

### 临时访问github（修改hosts）

在`/etc/hosts`中添加：注意ip地址会变，通过解析域名的网站获取。

```
199.232.69.194          github.global.ssl.fastly.net
140.82.113.3            github.com
185.199.108.154         github.githubassets.com 
```

刷新DNS：

```bash
sudo systemctl restart systemd-resolved
```



